<div class="form-container">
  <mat-card>
    <mat-card-header>
      <mat-card-title>
        {{ isEditMode ? 'Editar Personaje' : 'Nuevo Personaje' }}
      </mat-card-title>
    </mat-card-header>

    <mat-card-content>
      @if (loading$ | async) {
        <div class="loading-overlay">
          <mat-spinner></mat-spinner>
        </div>
      }

      <form [formGroup]="heroForm" (ngSubmit)="onSubmit()">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Nombre del Personaje</mat-label>
          <input 
            matInput 
            formControlName="name" 
            appUppercaseInput
            placeholder="Ej: SUPERMAN">
          @if (heroForm.get('name')?.invalid && heroForm.get('name')?.touched) {
            <mat-error>{{ getErrorMessage('name') }}</mat-error>
          }
        </mat-form-field>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Nombre Real (Opcional)</mat-label>
          <input 
            matInput 
            formControlName="fullName" 
            placeholder="Ej: Clark Kent">
        </mat-form-field>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Publisher (Opcional)</mat-label>
          <input 
            matInput 
            formControlName="publisher" 
            placeholder="Ej: DC Comics, Marvel Comics">
        </mat-form-field>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Ocupación (Opcional)</mat-label>
          <input 
            matInput 
            formControlName="occupation" 
            placeholder="Ej: Reportero, Científico">
        </mat-form-field>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Primera Aparición (Opcional)</mat-label>
          <input 
            matInput 
            formControlName="firstAppearance" 
            placeholder="Ej: Action Comics #1 (1938)">
        </mat-form-field>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Lugar de Nacimiento (Opcional)</mat-label>
          <input 
            matInput 
            formControlName="placeOfBirth" 
            placeholder="Ej: Krypton, Smallville">
        </mat-form-field>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>URL de Imagen (Opcional)</mat-label>
          <input 
            matInput 
            formControlName="imageUrl" 
            type="url"
            placeholder="https://ejemplo.com/imagen.jpg">
          <mat-hint>Ingresá la URL de una imagen del personaje</mat-hint>
        </mat-form-field>
        
        <div class="form-actions">
          <button mat-button type="button" (click)="onCancel()">
            Cancelar
          </button>
          <button mat-raised-button color="primary" type="submit">
            {{ isEditMode ? 'Actualizar' : 'Crear' }}
          </button>
        </div>
      </form>
    </mat-card-content>
  </mat-card>
</div>